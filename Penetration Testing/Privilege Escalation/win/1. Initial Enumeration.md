---
sort : 1
---

# 1. Enumeration & Kernel Exploits

all resources tou need !! 
https://github.com/TCM-Course-Resources/Windows-Privilege-Escalation-Resources/blob/master/README.md



Enumeration and first foothold 


https://fuzzysecurity.com/			<< so amayznig !! >>

https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Windows%20-%20Privilege%20Escalation.md

https://sushant747.gitbooks.io/total-oscp-guide/content/privilege_escalation_windows.html
  









* throught FTP anonymous connection ... we can download and UPLOAD the content !!  



# HTB MAchines 
* https://app.hackthebox.com/machines/Devel






- IIS7 <---- the web server !! >
- Microsoft ASP .NET !!! <=== the framework !! 
- Windows Server is the operating system !! 

	what kina payloads to upload and execute ?? 

		* reveseShell.asp or .aspx 

		using `msfvenom`


Q) what is a meterpreter session ??






```meterpreter

> getuid 

> sysinfo 


BROOOOOOO .... x86 is x32 bit ^^ 

```



# Enumeration 

5 steps of hacking !! (MITER ATT&CK)

information gathering , scanneing and enum, exploitation 

but even we exploited the machine ,,, we gonna go back to the enum step !! 




## Sys Enum 
```
meterpreter> shell


C:\Windows\system32\inetsrv> systeminfo 

# grep in CMD !! ??

C:\Windows\system32\inetsrv> systeminfo  | findstr /B /C:"OS Name" /C:"OS Version" /C:"System Type"


C:\Windows\system32\inetsrv> hostname 

```


### EXtract Patching !!!!

wmic := windows management instrumentation commandline 

qfe := quick fix engineering 

kbid := knowledge base id 

```
C:\Windows\system32\inetsrv> vmic qfe	
support.microsoft.com/?kbid = ....


C:\Windows\system32\inetsrv> vmic qfe get Col1Name,Col2Name,... 


C:\Windows\system32\inetsrv> vmic logicaldisk

C:\Windows\system32\inetsrv> vmic logicaldisk get Col1Name,Col2Name,... 
 
C:\Windows\system32\inetsrv> list drives??? <=== wrong !! 
```


## User/groups Enum


```

C:\Windows\system32\inetsrv> whoami

C:\Windows\system32\inetsrv> whoami /priv

C:\Windows\system32\inetsrv> whoami /groups

C:\Windows\system32\inetsrv> net user					<==== show th users on the machine !! 

C:\Windows\system32\inetsrv> net user specificUserName

C:\Windows\system32\inetsrv> net localgroup specificUserName	<======= to findout the membership >

```


## Net Enum

why ?? you could find that the machine having 2 NIC !!  

```
C:\Windows\system32\inetsrv> ipconfig /all

C:\Windows\system32\inetsrv> arp -a

C:\Windows\system32\inetsrv> route print 

# to check it there is a servers that only reachable from the inside (network) of the machine !! ---> poer forwarding

C:\Windows\system32\inetsrv> netstat -ano 


```























## Automated Tools

* [linux-smart-enumeration](https://github.com/diego-treitos/linux-smart-enumeration)
	```bash
	$ ./lse.sh -l1 # shows interesting information that should help you to privesc
	$ ./lse.sh -l2 # dump all the information it gathers about the system
	```
* [linPEAS](https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS)
	```bash
	$ ./linpeas.sh -a # all checks - deeper system enumeration, but it takes longer to complete.
	$ ./linpeas.sh -s # superfast & stealth - This will bypass some time consuming checks. In stealth mode Nothing will be written to the disk.
	$ ./linpeas.sh -P # Password - Pass a password that will be used with sudo -l and bruteforcing other users
	```
* [LinEnum](https://github.com/rebootuser/LinEnum)
	```bash
	$ ./LinEnum.sh -s -k keyword -r report -e /tmp/ -t
	```
* [linuxprivchecker](https://github.com/sleventyeleven/linuxprivchecker)
	```bash
	$ python linuxprivchecker.py -w -o linuxprivchecker.log
	```
* [Pspy](https://github.com/DominicBreuker/pspy)


## Useful Resources

* [GTFOBins](https://gtfobins.github.io/)

<br><br>

## Manually

Here is some of the best references

* [PayloadsAllTheThings](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Linux%20-%20Privilege%20Escalation.md)

* [sushant747](https://sushant747.gitbooks.io/total-oscp-guide/content/privilege_escalation_-_linux.html)

* [hacktricks](https://book.hacktricks.xyz/linux-hardening/linux-privilege-escalation-checklist)


```warning
Don't use kernel exploits if you can avoid it. If you use it it might crash the machine or put it in an unstable state. 

Always use a simpler priv-esc if you can. They can also produce a lot of stuff in the sys.log. So if you find anything good, put it up on your list and keep searching for other ways before exploiting it.
```